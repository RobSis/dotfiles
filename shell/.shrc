# Shell-independent configuration
# A place for setting environment and aliases
PATH=$PATH:~/.local/bin/

# Disable START/STOP flow control
stty -ixon -ixoff

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# enable color support of ls and also add handy aliases
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias grep='grep --color=auto'
fi


# Coloured man pages (in less)
export PAGER=less
man-color() {
    env \
        LESS_TERMCAP_mb=$(printf "\e[1;34m") \
        LESS_TERMCAP_md=$(printf "\e[1;34m") \
        LESS_TERMCAP_me=$(printf "\e[0m") \
        LESS_TERMCAP_se=$(printf "\e[0m") \
        LESS_TERMCAP_so=$(printf "\e[1;44;33m") \
        LESS_TERMCAP_ue=$(printf "\e[0m") \
        LESS_TERMCAP_us=$(printf "\e[1;32m") \
            /usr/bin/man "$@"
}
alias man='man-color'

# aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias rm='rm -i'
alias mv='mv -i'
alias cp='cp -i'
alias df='df -h'
alias xi='xclip -i'
alias xo='xclip -o'
alias aux='ps aux | grep'
alias tree='tree -C'
alias cal='cal -m'
alias siren='notify-send -u critical DONE -t 10000'
alias pxi="echo -n \'$PWD\' | xclip -i"
alias trim="sed 's/^\ *//' | sed 's/\ *$//'"
alias o='xdg-open'

#lastpass
lpls='lpass ls'
lppw='lpass show -c -G --password'
lpsh='lpass show -G'
lpst='lpass status'

. /usr/share/autojump/autojump.sh

alias tmux-pane-rename="tmux rename-window -t${TMUX_PANE}"

#youtube-dl
alias mp3-dl='youtube-dl -x --audio-format mp3 --audio-quality 0'
alias tmp3-dl='torify youtube-dl -x --audio-format mp3 --audio-quality 0'
alias mp3-dl-queue='tmux-pane-rename "$(basename $PWD)"; cat | while read line; do mp3-dl "$line"; echo "Finished."; sleep 5s; done;'
alias tmp3-dl-queue='tmux-pane-rename "$(basename $PWD)"; cat | while read line; do tmp3-dl "$line"; echo "Finished."; sleep 5s; done;'
alias mostsampled='(){ grep -i "$1" ~/samples/originals| sort -n }'
alias whosampled='(){ grep -i "$1" ~/samples/whosampled.csv }'
playtime() {
    date -u -d @$(sox --i -D $@ 2>/dev/null | awk '{s+=$1} END {print s}') +"%T"
}

alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias .....='cd ../../../..'

# debian
alias as='apt-cache search'
alias ai='sudo apt install'
alias ar='sudo apt remove'

alias gh="nl $HISTFILE | grep"
alias g="git"

alias vi='vim -p'

alias df='df'
alias dtrx='dtrx -n'

alias appletviewer=/usr/java/jdk1.7.0_67/bin/appletviewer

# Highlight output of commands
# Usage: command | hl <language>
function __hl {
    default="bash"
    if [ -n "$1" ]; then
        default=$1
    fi
    source-highlight -f esc -s $default
}
alias hl='__hl'

# ls after directory change
function cd() {
    builtin cd "$@" && ls --color=auto
}

# fzf
alias fzf="fzf --height 20 --reverse -m --bind ctrl-a:toggle-all"

# eyecandy
alias wthr='curl -4 http://wttr.in/Brno'
alias neofetch='neofetch --ascii_distro debian --ascii_logo_size small --disable cpu gpu memory uptime model title --colors 0 0 3 33 6 15;'

# include .shrc-magnolia if it exists
if [ -f "$HOME/.shrc-magnolia" ]; then
. "$HOME/.shrc-magnolia"
fi
